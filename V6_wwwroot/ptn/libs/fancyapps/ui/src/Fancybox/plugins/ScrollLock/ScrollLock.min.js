/**
 * Minified by jsDelivr using Terser v5.13.1.
 * Original file: /npm/@fancyapps/ui@4.0.27/src/Fancybox/plugins/ScrollLock/ScrollLock.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{isScrollable}from"../../../../src/shared/utils/isScrollable.js";export class ScrollLock{constructor(e){this.fancybox=e,this.viewport=null,this.pendingUpdate=null;for(const e of["onReady","onResize","onTouchstart","onTouchmove"])this[e]=this[e].bind(this)}onReady(){const e=window.visualViewport;e&&(this.viewport=e,this.startY=0,e.addEventListener("resize",this.onResize),this.updateViewport()),window.addEventListener("touchstart",this.onTouchstart,{passive:!1}),window.addEventListener("touchmove",this.onTouchmove,{passive:!1}),window.addEventListener("wheel",this.onWheel,{passive:!1})}onResize(){this.updateViewport()}updateViewport(){const e=this.fancybox,t=this.viewport,o=t.scale||1,s=e.$container;if(!s)return;let i="",n="",r="";o-1>.1&&(i=t.width*o+"px",n=t.height*o+"px",r=`translate3d(${t.offsetLeft}px, ${t.offsetTop}px, 0) scale(${1/o})`),s.style.width=i,s.style.height=n,s.style.transform=r}onTouchstart(e){this.startY=e.touches?e.touches[0].screenY:e.screenY}onTouchmove(e){const t=this.startY,o=window.innerWidth/window.document.documentElement.clientWidth;if(!e.cancelable)return;if(e.touches.length>1||1!==o)return;const s=isScrollable(e.composedPath()[0]);if(!s)return void e.preventDefault();const i=window.getComputedStyle(s),n=parseInt(i.getPropertyValue("height"),10),r=e.touches?e.touches[0].screenY:e.screenY,h=t<=r&&0===s.scrollTop,a=t>=r&&s.scrollHeight-s.scrollTop===n;(h||a)&&e.preventDefault()}onWheel(e){isScrollable(e.composedPath()[0])||e.preventDefault()}cleanup(){this.pendingUpdate&&(cancelAnimationFrame(this.pendingUpdate),this.pendingUpdate=null);const e=this.viewport;e&&(e.removeEventListener("resize",this.onResize),this.viewport=null),window.removeEventListener("touchstart",this.onTouchstart,!1),window.removeEventListener("touchmove",this.onTouchmove,!1),window.removeEventListener("wheel",this.onWheel,{passive:!1})}attach(){this.fancybox.on("initLayout",this.onReady)}detach(){this.fancybox.off("initLayout",this.onReady),this.cleanup()}}
//# sourceMappingURL=/sm/fbaf0967cd249bf5243ae835c5f7577054533b34de1f9dd5587f38168aa507cb.map