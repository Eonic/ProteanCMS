/**
 * Minified by jsDelivr using Terser v5.13.1.
 * Original file: /npm/ace-editor-builds@1.2.4/src-min/ext-chromevox.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
define("ace/ext/chromevox",["require","exports","module","ace/editor","ace/config"],(function(e,o,n){function t(e){if("undefined"!=typeof cvox&&cvox&&cvox.Api)oe(e);else{if(++ne>=te)return;window.setTimeout(t,500,e)}}var c={};c.SpeechProperty,c.Cursor,c.Token,c.Annotation;var r={punctuationEcho:"none",relativePitch:-.6},i="ALERT_NONMODAL",a="ALERT_MODAL",u="insertMode",s="start",p=[{substr:";",newSubstr:" semicolon "},{substr:":",newSubstr:" colon "}],l="annots",f="all_annots",d="toggle_location",v="mode",m="row_col",g="toggle_displacement",h="focus_text";c.editor=null;var k=null,x={},y=!1,A=!1,w=!1,S=null,b={},E={},C=function(e){return"CONTROL + SHIFT "+String.fromCharCode(e)},T=function(){return"ace/keyboard/vim"===c.editor.keyBinding.getKeyboardHandler().$id},L=function(e){return c.editor.getSession().getTokenAt(e.row,e.column+1)},_=function(e){return c.editor.getSession().getLine(e.row)},K={constant:{prop:{rate:.8,pitch:.4,volume:.9}},entity:{prop:{rate:.8,pitch:.8,volume:.9}},keyword:{prop:{rate:.8,pitch:.3,volume:.9}},storage:{prop:{rate:.8,pitch:.7,volume:.9}},variable:{prop:{rate:.8,pitch:.8,volume:.9}},meta:{prop:{rate:1,pitch:.5,volume:.9},replace:[{substr:"</",newSubstr:" closing tag "},{substr:"/>",newSubstr:" close tag "},{substr:"<",newSubstr:" tag start "},{substr:">",newSubstr:" tag end "}]}},O={prop:O},B=function(e,o){for(var n=e,t=0;t<o.length;t++){var c=o[t],r=new RegExp(c.substr,"g");n=n.replace(r,c.newSubstr)}return n},I=function(e,o,n){var t={value:""};t.type=e[o].type;for(var c=o;c<n;c++)t.value+=e[c].value;return t},M=function(e,o){var n=c.editor.getSession().getTokens(e);if(0===n.length||function(e){var o=c.editor.getSession().getLine(e);return null!==/^\s*$/.exec(o)}(e))cvox.Api.playEarcon("EDITABLE_TEXT");else{n=function(e){if(e.length<=1)return e;for(var o=[],n=0,t=1;t<e.length;t++){var c=e[n],r=e[t];R(c)!==R(r)&&(o.push(I(e,n,t)),n=t)}return o.push(I(e,n,e.length)),o}(n);var t=n[0];n=n.filter((function(e){return e!==t})),D(t,o),n.forEach(N)}},N=function(e){D(e,1)},R=function(e){if(e&&e.type){var o=e.type.split(".");if(0!==o.length){var n=o[0],t=K[n];return t||O}}},D=function(e,o){var n=R(e),t=B(e.value,p);n.replace&&(t=B(t,n.replace)),cvox.Api.speak(t,o,n.prop)},$=function(e){var o=_(e);cvox.Api.speak(o[e.column],1)},q=function(e,o){var n=_(o).substring(e.column,o.column);n=n.replace(/ /g," space "),cvox.Api.speak(n)},P=function(e,o){if(1!==Math.abs(e.column-o.column)){var n=_(o).length;if(0===o.column||o.column===n)return void M(o.row,0);if(function(e){var o=_(e),n=o.substr(e.column-1);return 0===e.column&&(n=" "+o),null!==/^\W(\w+)/.exec(n)}(o))return cvox.Api.stop(),void N(L(o))}$(o)},F=function(e){if(w)w=!1;else{var o=c.editor.selection.getCursor();o.row!==k.row?function(e){x[e.row]&&cvox.Api.playEarcon(i),y?(cvox.Api.stop(),$(e),N(L(e)),M(e.row,1)):M(e.row,0)}(o):function(e,o){c.editor.selection.isEmpty()?A?q(e,o):P(e,o):(q(e,o),cvox.Api.speak("selected",1))}(k,o),k=o}},H=function(e){c.editor.selection.isEmpty()&&cvox.Api.speak("unselected")},V=function(e){switch(e.action){case"remove":cvox.Api.speak(e.text,0,r),w=!0;break;case"insert":cvox.Api.speak(e.text,0),w=!0}},J=function(e){var o=e.row,n=e.column;return!x[o]||!x[o][n]},W=function(e){var o=c.editor.getSession().getAnnotations();o.filter(J).length>0&&cvox.Api.playEarcon(i),function(e){x={};for(var o=0;o<e.length;o++){var n=e[o],t=n.row,c=n.column;x[t]||(x[t]={}),x[t][c]=n}}(o)},X=function(e){var o=e.type+" "+e.text+" on "+j(e.row,e.column);o=o.replace(";","semicolon"),cvox.Api.speak(o,1)},Y=function(e){var o=x[e];for(var n in o)X(o[n])},j=function(e,o){return"row "+(e+1)+" column "+(o+1)},z=function(e){if(e.ctrlKey&&e.shiftKey){var o=b[e.keyCode];o&&o.func()}},G=function(e,o){if(T()){var n=o.keyBinding.$data.state;if(n!==S){switch(n){case u:cvox.Api.playEarcon(a),cvox.Api.setKeyEcho(!0);break;case s:cvox.Api.playEarcon(a),cvox.Api.setKeyEcho(!1)}S=n}}},Q=function(e){var o=e.detail.customCommand,n=E[o];n&&(n.func(),c.editor.focus())},U=function(e){e.match?M(k.row,0):cvox.Api.playEarcon("INVALID_KEYPRESS")},Z=[{keyCode:49,func:function(){Y(k.row)},cmd:l,desc:"Speak annotations on line"},{keyCode:50,func:function(){for(var e in x)Y(e)},cmd:f,desc:"Speak all annotations"},{keyCode:51,func:function(){if(T())switch(c.editor.keyBinding.$data.state){case u:cvox.Api.speak("Insert mode");break;case s:cvox.Api.speak("Command mode")}},cmd:v,desc:"Speak Vim mode"},{keyCode:52,func:function(){(y=!y)?cvox.Api.speak("Speak location on row change enabled."):cvox.Api.speak("Speak location on row change disabled.")},cmd:d,desc:"Toggle speak row location"},{keyCode:53,func:function(){cvox.Api.speak(j(k.row,k.column))},cmd:m,desc:"Speak row and column"},{keyCode:54,func:function(){(A=!A)?cvox.Api.speak("Speak displacement on column changes."):cvox.Api.speak("Speak current character or word on column changes.")},cmd:g,desc:"Toggle speak displacement"},{keyCode:55,func:function(){c.editor.focus()},cmd:h,desc:"Focus text"}],ee=function(e,o){c.editor=o,o.getSession().selection.on("changeCursor",F),o.getSession().selection.on("changeSelection",H),o.getSession().on("change",V),o.getSession().on("changeAnnotation",W),o.on("changeStatus",G),o.on("findSearchBox",U),o.container.addEventListener("keydown",z),k=o.selection.getCursor()},oe=function(e){ee(0,e),Z.forEach((function(e){b[e.keyCode]=e,E[e.cmd]=e})),e.on("focus",ee),T()&&cvox.Api.setKeyEcho(!1),function(){var e=Z.map((function(e){return{desc:e.desc+C(e.keyCode),cmd:e.cmd}})),o=document.querySelector("body");o.setAttribute("contextMenuActions",JSON.stringify(e)),o.addEventListener("ATCustomEvent",Q,!0)}()},ne=0,te=15,ce=e("../editor").Editor;e("../config").defineOptions(ce.prototype,"editor",{enableChromevoxEnhancements:{set:function(e){e&&t(this)},value:!0}})})),window.require(["ace/ext/chromevox"],(function(){}));
//# sourceMappingURL=/sm/6e7b433e31d1084abeb8349a8bcb448c292ff706168741f2a706b201edecdf38.map