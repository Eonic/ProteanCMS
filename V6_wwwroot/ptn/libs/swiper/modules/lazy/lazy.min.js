/**
 * Minified by jsDelivr using Terser v5.13.1.
 * Original file: /npm/swiper@8.1.6/modules/lazy/lazy.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{getWindow}from"ssr-window";import $ from"../../shared/dom.js";export default function Lazy(a){let{swiper:e,extendParams:s,on:t,emit:l}=a;s({lazy:{checkInView:!1,enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,scrollingElement:"",elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}}),e.lazy={};let r=!1,i=!1;function n(a,s){void 0===s&&(s=!0);const t=e.params.lazy;if(void 0===a)return;if(0===e.slides.length)return;const r=e.virtual&&e.params.virtual.enabled?e.$wrapperEl.children(`.${e.params.slideClass}[data-swiper-slide-index="${a}"]`):e.slides.eq(a),i=r.find(`.${t.elementClass}:not(.${t.loadedClass}):not(.${t.loadingClass})`);!r.hasClass(t.elementClass)||r.hasClass(t.loadedClass)||r.hasClass(t.loadingClass)||i.push(r[0]),0!==i.length&&i.each((a=>{const i=$(a);i.addClass(t.loadingClass);const d=i.attr("data-background"),o=i.attr("data-src"),c=i.attr("data-srcset"),p=i.attr("data-sizes"),m=i.parent("picture");e.loadImage(i[0],o||d,c,p,!1,(()=>{if(null!=e&&e&&(!e||e.params)&&!e.destroyed){if(d?(i.css("background-image",`url("${d}")`),i.removeAttr("data-background")):(c&&(i.attr("srcset",c),i.removeAttr("data-srcset")),p&&(i.attr("sizes",p),i.removeAttr("data-sizes")),m.length&&m.children("source").each((a=>{const e=$(a);e.attr("data-srcset")&&(e.attr("srcset",e.attr("data-srcset")),e.removeAttr("data-srcset"))})),o&&(i.attr("src",o),i.removeAttr("data-src"))),i.addClass(t.loadedClass).removeClass(t.loadingClass),r.find(`.${t.preloaderClass}`).remove(),e.params.loop&&s){const a=r.attr("data-swiper-slide-index");if(r.hasClass(e.params.slideDuplicateClass)){n(e.$wrapperEl.children(`[data-swiper-slide-index="${a}"]:not(.${e.params.slideDuplicateClass})`).index(),!1)}else{n(e.$wrapperEl.children(`.${e.params.slideDuplicateClass}[data-swiper-slide-index="${a}"]`).index(),!1)}}l("lazyImageReady",r[0],i[0]),e.params.autoHeight&&e.updateAutoHeight()}})),l("lazyImageLoad",r[0],i[0])}))}function d(){const{$wrapperEl:a,params:s,slides:t,activeIndex:l}=e,r=e.virtual&&s.virtual.enabled,d=s.lazy;let o=s.slidesPerView;function c(e){if(r){if(a.children(`.${s.slideClass}[data-swiper-slide-index="${e}"]`).length)return!0}else if(t[e])return!0;return!1}function p(a){return r?$(a).attr("data-swiper-slide-index"):$(a).index()}if("auto"===o&&(o=0),i||(i=!0),e.params.watchSlidesProgress)a.children(`.${s.slideVisibleClass}`).each((a=>{n(r?$(a).attr("data-swiper-slide-index"):$(a).index())}));else if(o>1)for(let a=l;a<l+o;a+=1)c(a)&&n(a);else n(l);if(d.loadPrevNext)if(o>1||d.loadPrevNextAmount&&d.loadPrevNextAmount>1){const a=d.loadPrevNextAmount,e=Math.ceil(o),s=Math.min(l+e+Math.max(a,e),t.length),r=Math.max(l-Math.max(e,a),0);for(let a=l+e;a<s;a+=1)c(a)&&n(a);for(let a=r;a<l;a+=1)c(a)&&n(a)}else{const e=a.children(`.${s.slideNextClass}`);e.length>0&&n(p(e));const t=a.children(`.${s.slidePrevClass}`);t.length>0&&n(p(t))}}function o(){const a=getWindow();if(!e||e.destroyed)return;const s=e.params.lazy.scrollingElement?$(e.params.lazy.scrollingElement):$(a),t=s[0]===a,l=t?a.innerWidth:s[0].offsetWidth,i=t?a.innerHeight:s[0].offsetHeight,n=e.$el.offset(),{rtlTranslate:c}=e;let p=!1;c&&(n.left-=e.$el[0].scrollLeft);const m=[[n.left,n.top],[n.left+e.width,n.top],[n.left,n.top+e.height],[n.left+e.width,n.top+e.height]];for(let a=0;a<m.length;a+=1){const e=m[a];if(e[0]>=0&&e[0]<=l&&e[1]>=0&&e[1]<=i){if(0===e[0]&&0===e[1])continue;p=!0}}const h=!("touchstart"!==e.touchEvents.start||!e.support.passiveListener||!e.params.passiveListeners)&&{passive:!0,capture:!1};p?(d(),s.off("scroll",o,h)):r||(r=!0,s.on("scroll",o,h))}t("beforeInit",(()=>{e.params.lazy.enabled&&e.params.preloadImages&&(e.params.preloadImages=!1)})),t("init",(()=>{e.params.lazy.enabled&&(e.params.lazy.checkInView?o():d())})),t("scroll",(()=>{e.params.freeMode&&e.params.freeMode.enabled&&!e.params.freeMode.sticky&&d()})),t("scrollbarDragMove resize _freeModeNoMomentumRelease",(()=>{e.params.lazy.enabled&&(e.params.lazy.checkInView?o():d())})),t("transitionStart",(()=>{e.params.lazy.enabled&&(e.params.lazy.loadOnTransitionStart||!e.params.lazy.loadOnTransitionStart&&!i)&&(e.params.lazy.checkInView?o():d())})),t("transitionEnd",(()=>{e.params.lazy.enabled&&!e.params.lazy.loadOnTransitionStart&&(e.params.lazy.checkInView?o():d())})),t("slideChange",(()=>{const{lazy:a,cssMode:s,watchSlidesProgress:t,touchReleaseOnEdges:l,resistanceRatio:r}=e.params;a.enabled&&(s||t&&(l||0===r))&&d()})),t("destroy",(()=>{e.$el&&e.$el.find(`.${e.params.lazy.loadingClass}`).removeClass(e.params.lazy.loadingClass)})),Object.assign(e.lazy,{load:d,loadInSlide:n})}
//# sourceMappingURL=/sm/e9219741402b4d2e7d96e56cb57dfbecf7da1a5ed39105b3748a7c2338da10da.map