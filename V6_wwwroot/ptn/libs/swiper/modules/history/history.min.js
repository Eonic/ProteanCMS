/**
 * Minified by jsDelivr using Terser v5.13.1.
 * Original file: /npm/swiper@8.1.6/modules/history/history.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{getWindow}from"ssr-window";export default function History(e){let{swiper:a,extendParams:t,on:s}=e;t({history:{enabled:!1,root:"",replaceState:!1,key:"slides",keepQuery:!1}});let r=!1,o={};const i=e=>e.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),l=e=>{const a=getWindow();let t;t=e?new URL(e):a.location;const s=t.pathname.slice(1).split("/").filter((e=>""!==e)),r=s.length;return{key:s[r-2],value:s[r-1]}},n=(e,t)=>{const s=getWindow();if(!r||!a.params.history.enabled)return;let o;o=a.params.url?new URL(a.params.url):s.location;const l=a.slides.eq(t);let n=i(l.attr("data-history"));if(a.params.history.root.length>0){let t=a.params.history.root;"/"===t[t.length-1]&&(t=t.slice(0,t.length-1)),n=`${t}/${e}/${n}`}else o.pathname.includes(e)||(n=`${e}/${n}`);a.params.history.keepQuery&&(n+=o.search);const p=s.history.state;p&&p.value===n||(a.params.history.replaceState?s.history.replaceState({value:n},null,n):s.history.pushState({value:n},null,n))},p=(e,t,s)=>{if(t)for(let r=0,o=a.slides.length;r<o;r+=1){const o=a.slides.eq(r);if(i(o.attr("data-history"))===t&&!o.hasClass(a.params.slideDuplicateClass)){const t=o.index();a.slideTo(t,e,s)}}else a.slideTo(0,e,s)},d=()=>{o=l(a.params.url),p(a.params.speed,o.value,!1)};s("init",(()=>{a.params.history.enabled&&(()=>{const e=getWindow();if(a.params.history){if(!e.history||!e.history.pushState)return a.params.history.enabled=!1,void(a.params.hashNavigation.enabled=!0);r=!0,o=l(a.params.url),(o.key||o.value)&&(p(0,o.value,a.params.runCallbacksOnInit),a.params.history.replaceState||e.addEventListener("popstate",d))}})()})),s("destroy",(()=>{a.params.history.enabled&&(()=>{const e=getWindow();a.params.history.replaceState||e.removeEventListener("popstate",d)})()})),s("transitionEnd _freeModeNoMomentumRelease",(()=>{r&&n(a.params.history.key,a.activeIndex)})),s("slideChange",(()=>{r&&a.params.cssMode&&n(a.params.history.key,a.activeIndex)}))}
//# sourceMappingURL=/sm/955acd97164f9260c86147f7901d4029cccfcac81a73f87ad065b5aac6ee30fa.map