/**
 * Minified by jsDelivr using Terser v5.13.1.
 * Original file: /npm/swiper@8.1.6/modules/scrollbar/scrollbar.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{getDocument}from"ssr-window";import $ from"../../shared/dom.js";import{nextTick}from"../../shared/utils.js";import createElementIfNotDefined from"../../shared/create-element-if-not-defined.js";export default function Scrollbar(e){let{swiper:r,extendParams:a,on:s,emit:l}=e;const t=getDocument();let o,n,i,c,p=!1,d=null,u=null;function m(){if(!r.params.scrollbar.el||!r.scrollbar.el)return;const{scrollbar:e,rtlTranslate:a,progress:s}=r,{$dragEl:l,$el:t}=e,o=r.params.scrollbar;let c=n,p=(i-n)*s;a?(p=-p,p>0?(c=n-p,p=0):-p+n>i&&(c=i+p)):p<0?(c=n+p,p=0):p+n>i&&(c=i-p),r.isHorizontal()?(l.transform(`translate3d(${p}px, 0, 0)`),l[0].style.width=`${c}px`):(l.transform(`translate3d(0px, ${p}px, 0)`),l[0].style.height=`${c}px`),o.hide&&(clearTimeout(d),t[0].style.opacity=1,d=setTimeout((()=>{t[0].style.opacity=0,t.transition(400)}),1e3))}function b(){if(!r.params.scrollbar.el||!r.scrollbar.el)return;const{scrollbar:e}=r,{$dragEl:a,$el:s}=e;a[0].style.width="",a[0].style.height="",i=r.isHorizontal()?s[0].offsetWidth:s[0].offsetHeight,c=r.size/(r.virtualSize+r.params.slidesOffsetBefore-(r.params.centeredSlides?r.snapGrid[0]:0)),n="auto"===r.params.scrollbar.dragSize?i*c:parseInt(r.params.scrollbar.dragSize,10),r.isHorizontal()?a[0].style.width=`${n}px`:a[0].style.height=`${n}px`,s[0].style.display=c>=1?"none":"",r.params.scrollbar.hide&&(s[0].style.opacity=0),r.params.watchOverflow&&r.enabled&&e.$el[r.isLocked?"addClass":"removeClass"](r.params.scrollbar.lockClass)}function f(e){return r.isHorizontal()?"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].clientX:e.clientX:"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].clientY:e.clientY}function g(e){const{scrollbar:a,rtlTranslate:s}=r,{$el:l}=a;let t;t=(f(e)-l.offset()[r.isHorizontal()?"left":"top"]-(null!==o?o:n/2))/(i-n),t=Math.max(Math.min(t,1),0),s&&(t=1-t);const c=r.minTranslate()+(r.maxTranslate()-r.minTranslate())*t;r.updateProgress(c),r.setTranslate(c),r.updateActiveIndex(),r.updateSlidesClasses()}function h(e){const a=r.params.scrollbar,{scrollbar:s,$wrapperEl:t}=r,{$el:n,$dragEl:i}=s;p=!0,o=e.target===i[0]||e.target===i?f(e)-e.target.getBoundingClientRect()[r.isHorizontal()?"left":"top"]:null,e.preventDefault(),e.stopPropagation(),t.transition(100),i.transition(100),g(e),clearTimeout(u),n.transition(0),a.hide&&n.css("opacity",1),r.params.cssMode&&r.$wrapperEl.css("scroll-snap-type","none"),l("scrollbarDragStart",e)}function v(e){const{scrollbar:a,$wrapperEl:s}=r,{$el:t,$dragEl:o}=a;p&&(e.preventDefault?e.preventDefault():e.returnValue=!1,g(e),s.transition(0),t.transition(0),o.transition(0),l("scrollbarDragMove",e))}function y(e){const a=r.params.scrollbar,{scrollbar:s,$wrapperEl:t}=r,{$el:o}=s;p&&(p=!1,r.params.cssMode&&(r.$wrapperEl.css("scroll-snap-type",""),t.transition("")),a.hide&&(clearTimeout(u),u=nextTick((()=>{o.css("opacity",0),o.transition(400)}),1e3)),l("scrollbarDragEnd",e),a.snapOnRelease&&r.slideToClosest())}function E(e){const{scrollbar:a,touchEventsTouch:s,touchEventsDesktop:l,params:o,support:n}=r,i=a.$el[0],c=!(!n.passiveListener||!o.passiveListeners)&&{passive:!1,capture:!1},p=!(!n.passiveListener||!o.passiveListeners)&&{passive:!0,capture:!1};if(!i)return;const d="on"===e?"addEventListener":"removeEventListener";n.touch?(i[d](s.start,h,c),i[d](s.move,v,c),i[d](s.end,y,p)):(i[d](l.start,h,c),t[d](l.move,v,c),t[d](l.end,y,p))}function T(){const{scrollbar:e,$el:a}=r;r.params.scrollbar=createElementIfNotDefined(r,r.originalParams.scrollbar,r.params.scrollbar,{el:"swiper-scrollbar"});const s=r.params.scrollbar;if(!s.el)return;let l=$(s.el);r.params.uniqueNavElements&&"string"==typeof s.el&&l.length>1&&1===a.find(s.el).length&&(l=a.find(s.el));let t=l.find(`.${r.params.scrollbar.dragClass}`);0===t.length&&(t=$(`<div class="${r.params.scrollbar.dragClass}"></div>`),l.append(t)),Object.assign(e,{$el:l,el:l[0],$dragEl:t,dragEl:t[0]}),s.draggable&&r.params.scrollbar.el&&E("on"),l&&l[r.enabled?"removeClass":"addClass"](r.params.scrollbar.lockClass)}function w(){r.params.scrollbar.el&&E("off")}a({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag"}}),r.scrollbar={el:null,dragEl:null,$el:null,$dragEl:null},s("init",(()=>{T(),b(),m()})),s("update resize observerUpdate lock unlock",(()=>{b()})),s("setTranslate",(()=>{m()})),s("setTransition",((e,a)=>{!function(e){r.params.scrollbar.el&&r.scrollbar.el&&r.scrollbar.$dragEl.transition(e)}(a)})),s("enable disable",(()=>{const{$el:e}=r.scrollbar;e&&e[r.enabled?"removeClass":"addClass"](r.params.scrollbar.lockClass)})),s("destroy",(()=>{w()})),Object.assign(r.scrollbar,{updateSize:b,setTranslate:m,init:T,destroy:w})}
//# sourceMappingURL=/sm/27e8a1b9c46d76a0b910f3a2e4254896bc345abb4e8c9c2be2f5e183073619a7.map