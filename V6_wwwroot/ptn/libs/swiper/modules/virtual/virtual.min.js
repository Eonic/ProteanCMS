/**
 * Minified by jsDelivr using Terser v5.13.1.
 * Original file: /npm/swiper@8.1.6/modules/virtual/virtual.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import $ from"../../shared/dom.js";import{setCSSProperty}from"../../shared/utils.js";export default function Virtual(e){let a,{swiper:r,extendParams:s,on:i,emit:t}=e;function l(e,a){const s=r.params.virtual;if(s.cache&&r.virtual.cache[a])return r.virtual.cache[a];const i=s.renderSlide?$(s.renderSlide.call(r,e,a)):$(`<div class="${r.params.slideClass}" data-swiper-slide-index="${a}">${e}</div>`);return i.attr("data-swiper-slide-index")||i.attr("data-swiper-slide-index",a),s.cache&&(r.virtual.cache[a]=i),i}function d(e){const{slidesPerView:a,slidesPerGroup:s,centeredSlides:i}=r.params,{addSlidesBefore:d,addSlidesAfter:n}=r.params.virtual,{from:o,to:p,slides:u,slidesGrid:c,offset:f}=r.virtual;r.params.cssMode||r.updateActiveIndex();const v=r.activeIndex||0;let m,h,x;m=r.rtlTranslate?"right":r.isHorizontal()?"left":"top",i?(h=Math.floor(a/2)+s+n,x=Math.floor(a/2)+s+d):(h=a+(s-1)+n,x=s+d);const S=Math.max((v||0)-x,0),w=Math.min((v||0)+h,u.length-1),$=(r.slidesGrid[S]||0)-(r.slidesGrid[0]||0);function g(){r.updateSlides(),r.updateProgress(),r.updateSlidesClasses(),r.lazy&&r.params.lazy.enabled&&r.lazy.load(),t("virtualUpdate")}if(Object.assign(r.virtual,{from:S,to:w,offset:$,slidesGrid:r.slidesGrid}),o===S&&p===w&&!e)return r.slidesGrid!==c&&$!==f&&r.slides.css(m,`${$}px`),r.updateProgress(),void t("virtualUpdate");if(r.params.virtual.renderExternal)return r.params.virtual.renderExternal.call(r,{offset:$,from:S,to:w,slides:function(){const e=[];for(let a=S;a<=w;a+=1)e.push(u[a]);return e}()}),void(r.params.virtual.renderExternalUpdate?g():t("virtualUpdate"));const E=[],y=[];if(e)r.$wrapperEl.find(`.${r.params.slideClass}`).remove();else for(let e=o;e<=p;e+=1)(e<S||e>w)&&r.$wrapperEl.find(`.${r.params.slideClass}[data-swiper-slide-index="${e}"]`).remove();for(let a=0;a<u.length;a+=1)a>=S&&a<=w&&(void 0===p||e?y.push(a):(a>p&&y.push(a),a<o&&E.push(a)));y.forEach((e=>{r.$wrapperEl.append(l(u[e],e))})),E.sort(((e,a)=>a-e)).forEach((e=>{r.$wrapperEl.prepend(l(u[e],e))})),r.$wrapperEl.children(".swiper-slide").css(m,`${$}px`),g()}s({virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}}),r.virtual={cache:{},from:void 0,to:void 0,slides:[],offset:0,slidesGrid:[]},i("beforeInit",(()=>{r.params.virtual.enabled&&(r.virtual.slides=r.params.virtual.slides,r.classNames.push(`${r.params.containerModifierClass}virtual`),r.params.watchSlidesProgress=!0,r.originalParams.watchSlidesProgress=!0,r.params.initialSlide||d())})),i("setTranslate",(()=>{r.params.virtual.enabled&&(r.params.cssMode&&!r._immediateVirtual?(clearTimeout(a),a=setTimeout((()=>{d()}),100)):d())})),i("init update resize",(()=>{r.params.virtual.enabled&&r.params.cssMode&&setCSSProperty(r.wrapperEl,"--swiper-virtual-size",`${r.virtualSize}px`)})),Object.assign(r.virtual,{appendSlide:function(e){if("object"==typeof e&&"length"in e)for(let a=0;a<e.length;a+=1)e[a]&&r.virtual.slides.push(e[a]);else r.virtual.slides.push(e);d(!0)},prependSlide:function(e){const a=r.activeIndex;let s=a+1,i=1;if(Array.isArray(e)){for(let a=0;a<e.length;a+=1)e[a]&&r.virtual.slides.unshift(e[a]);s=a+e.length,i=e.length}else r.virtual.slides.unshift(e);if(r.params.virtual.cache){const e=r.virtual.cache,a={};Object.keys(e).forEach((r=>{const s=e[r],t=s.attr("data-swiper-slide-index");t&&s.attr("data-swiper-slide-index",parseInt(t,10)+i),a[parseInt(r,10)+i]=s})),r.virtual.cache=a}d(!0),r.slideTo(s,0)},removeSlide:function(e){if(null==e)return;let a=r.activeIndex;if(Array.isArray(e))for(let s=e.length-1;s>=0;s-=1)r.virtual.slides.splice(e[s],1),r.params.virtual.cache&&delete r.virtual.cache[e[s]],e[s]<a&&(a-=1),a=Math.max(a,0);else r.virtual.slides.splice(e,1),r.params.virtual.cache&&delete r.virtual.cache[e],e<a&&(a-=1),a=Math.max(a,0);d(!0),r.slideTo(a,0)},removeAllSlides:function(){r.virtual.slides=[],r.params.virtual.cache&&(r.virtual.cache={}),d(!0),r.slideTo(0,0)},update:d})}
//# sourceMappingURL=/sm/756bf22d58d884b4d9792ba69d08d3e4c0704c4dda272ed345d85dbf29aaedcc.map