/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/blueimp-load-image@5.16.0/js/load-image-exif.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image","./load-image-meta"],e):"object"==typeof module&&module.exports?e(require("./load-image"),require("./load-image-meta")):e(window.loadImage)}((function(e){"use strict";function t(e){e&&(Object.defineProperty(this,"map",{value:this.ifds[e].map}),Object.defineProperty(this,"tags",{value:this.tags&&this.tags[e]||{}}))}t.prototype.map={Orientation:274,Thumbnail:"ifd1",Blob:513,Exif:34665,GPSInfo:34853,Interoperability:40965},t.prototype.ifds={ifd1:{name:"Thumbnail",map:t.prototype.map},34665:{name:"Exif",map:{}},34853:{name:"GPSInfo",map:{}},40965:{name:"Interoperability",map:{}}},t.prototype.get=function(e){return this[e]||this[this.map[e]]};var i={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,i){return e.getUint16(t,i)},size:2},4:{getValue:function(e,t,i){return e.getUint32(t,i)},size:4},5:{getValue:function(e,t,i){return e.getUint32(t,i)/e.getUint32(t+4,i)},size:8},9:{getValue:function(e,t,i){return e.getInt32(t,i)},size:4},10:{getValue:function(e,t,i){return e.getInt32(t,i)/e.getInt32(t+4,i)},size:8}};function n(e,t,n,f,a,s){var o,r,l,g,u,d,c=i[f];if(c){if(!((r=(o=c.size*a)>4?t+e.getUint32(n+8,s):n+8)+o>e.byteLength)){if(1===a)return c.getValue(e,r,s);for(l=[],g=0;g<a;g+=1)l[g]=c.getValue(e,r+g*c.size,s);if(c.ascii){for(u="",g=0;g<l.length&&"\0"!==(d=l[g]);g+=1)u+=d;return u}return l}console.log("Invalid Exif data: Invalid data offset.")}else console.log("Invalid Exif data: Invalid tag type.")}function f(e,t,i){return(!e||e[i])&&(!t||!0!==t[i])}function a(e,t,i,a,s,o,r,l){var g,u,d,c,x,m;if(i+6>e.byteLength)console.log("Invalid Exif data: Invalid directory offset.");else{if(!((u=i+2+12*(g=e.getUint16(i,a)))+4>e.byteLength)){for(d=0;d<g;d+=1)c=i+2+12*d,f(r,l,x=e.getUint16(c,a))&&(m=n(e,t,c,e.getUint16(c+2,a),e.getUint32(c+4,a),a),s[x]=m,o&&(o[x]=c));return e.getUint32(u,a)}console.log("Invalid Exif data: Invalid directory size.")}}i[7]=i[1],e.parseExifData=function(i,n,s,o,r){if(!r.disableExif){var l,g,u,d=r.includeExifTags,c=r.excludeExifTags||{34665:{37500:!0}},x=n+10;if(1165519206===i.getUint32(n+4))if(x+8>i.byteLength)console.log("Invalid Exif data: Invalid segment size.");else if(0===i.getUint16(n+8)){switch(i.getUint16(x)){case 18761:l=!0;break;case 19789:l=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}42===i.getUint16(x+2,l)?(g=i.getUint32(x+4,l),o.exif=new t,r.disableExifOffsets||(o.exifOffsets=new t,o.exifTiffOffset=x,o.exifLittleEndian=l),(g=a(i,x,x+g,l,o.exif,o.exifOffsets,d,c))&&f(d,c,"ifd1")&&(o.exif.ifd1=g,o.exifOffsets&&(o.exifOffsets.ifd1=x+g)),Object.keys(o.exif.ifds).forEach((function(e){!function(e,i,n,f,s,o,r){var l=e.exif[i];l&&(e.exif[i]=new t(i),e.exifOffsets&&(e.exifOffsets[i]=new t(i)),a(n,f,f+l,s,e.exif[i],e.exifOffsets&&e.exifOffsets[i],o&&o[i],r&&r[i]))}(o,e,i,x,l,d,c)})),(u=o.exif.ifd1)&&u[513]&&(u[513]=function(t,i,n){if(n){if(!(i+n>t.byteLength))return new Blob([e.bufferSlice.call(t.buffer,i,i+n)],{type:"image/jpeg"});console.log("Invalid Exif data: Invalid thumbnail data.")}}(i,x+u[513],u[514]))):console.log("Invalid Exif data: Missing TIFF marker.")}else console.log("Invalid Exif data: Missing byte alignment offset.")}},e.metaDataParsers.jpeg[65505].push(e.parseExifData),e.exifWriters={274:function(e,t,i){var n=t.exifOffsets[274];return n?(new DataView(e,n+8,2).setUint16(0,i,t.exifLittleEndian),e):e}},e.writeExifData=function(t,i,n,f){return e.exifWriters[i.exif.map[n]](t,i,f)},e.ExifMap=t}));
//# sourceMappingURL=/sm/4c568afebd4cfcff8d9a90d318693a86b56a1402e0bdf15cf51394254a06b0ad.map