/**
 * Failed to minify the file using Terser v5.39.0. Serving the original version.
 * Original file: /npm/vue@2.6.14/src/platforms/weex/compiler/modules/recycle-list/v-on.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
/* @flow */

const inlineStatementRE = /^\s*([A-Za-z_$0-9\['\."\]]+)*\s*\(\s*(([A-Za-z_$0-9\['\."\]]+)?(\s*,\s*([A-Za-z_$0-9\['\."\]]+))*)\s*\)$/

function parseHandlerParams (handler: ASTElementHandler) {
  const res = inlineStatementRE.exec(handler.value)
  if (res && res[2]) {
    handler.params = res[2].split(/\s*,\s*/)
  }
}

export function postTransformVOn (el: ASTElement) {
  const events: ASTElementHandlers | void = el.events
  if (!events) {
    return
  }
  for (const name in events) {
    const handler: ASTElementHandler | Array<ASTElementHandler> = events[name]
    if (Array.isArray(handler)) {
      handler.map(fn => parseHandlerParams(fn))
    } else {
      parseHandlerParams(handler)
    }
  }
}
