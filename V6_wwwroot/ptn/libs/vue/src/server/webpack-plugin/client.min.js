/**
 * Minified by jsDelivr using Terser v5.3.5.
 * Original file: /npm/vue@2.6.14/src/server/webpack-plugin/client.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
const hash=require("hash-sum"),uniq=require("lodash.uniq");import{isJS,isCSS,getAssetName,onEmit,stripModuleIdHash}from"./util";export default class VueSSRClientPlugin{constructor(s={}){this.options=Object.assign({filename:"vue-ssr-client-manifest.json"},s)}apply(s){onEmit(s,"vue-client-plugin","PROCESS_ASSETS_STAGE_ADDITIONAL",((s,e)=>{const t=s.getStats().toJson(),i=uniq(t.assets.map((s=>s.name))),n=uniq(Object.keys(t.entrypoints).map((s=>t.entrypoints[s].assets)).reduce(((s,e)=>e.concat(s)),[]).map(getAssetName).filter((s=>isJS(s)||isCSS(s)))),a=i.filter((s=>isJS(s)||isCSS(s))).filter((s=>n.indexOf(s)<0)),l={publicPath:t.publicPath,all:i,initial:n,async:a,modules:{}},o=t.modules.filter((s=>s.assets.length)),u=s=>l.all.indexOf(getAssetName(s));t.modules.forEach((s=>{if(1===s.chunks.length){const e=s.chunks[0],i=t.chunks.find((s=>s.id===e));if(!i||!i.files)return;const n=stripModuleIdHash(s.identifier),a=l.modules[hash(n)]=i.files.map(u);o.forEach((s=>{s.chunks.some((s=>s===e))&&a.push.apply(a,s.assets.map(u))}))}}));const r=JSON.stringify(l,null,2);s.assets[this.options.filename]={source:()=>r,size:()=>r.length},e()}))}}
//# sourceMappingURL=/sm/ea2d7a1d9062562b4d63972a82a79df36b67cdfb23d3bb614695ac75bdce1ac4.map