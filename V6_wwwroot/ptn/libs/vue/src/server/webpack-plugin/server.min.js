/**
 * Minified by jsDelivr using Terser v5.3.5.
 * Original file: /npm/vue@2.6.14/src/server/webpack-plugin/server.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{validate,isJS,getAssetName,onEmit}from"./util";export default class VueSSRServerPlugin{constructor(e={}){this.options=Object.assign({filename:"vue-ssr-server-bundle.json"},e)}apply(e){validate(e);onEmit(e,"vue-server-plugin","PROCESS_ASSETS_STAGE_OPTIMIZE_TRANSFER",((e,s)=>{const t=e.getStats().toJson(),n=Object.keys(t.entrypoints)[0],r=t.entrypoints[n];if(!r)return s();const o=r.assets.map(getAssetName).filter(isJS);if(o.length>1)throw new Error("Server-side bundle should have one single entry file. Avoid using CommonsChunkPlugin in the server config.");const i=o[0];if(!i||"string"!=typeof i)throw new Error(`Entry "${n}" not found. Did you specify the correct entry option?`);const a={entry:i,files:{},maps:{}};Object.keys(e.assets).forEach((s=>{isJS(s)?a.files[s]=e.assets[s].source():s.match(/\.js\.map$/)&&(a.maps[s.replace(/\.map$/,"")]=JSON.parse(e.assets[s].source())),delete e.assets[s]}));const l=JSON.stringify(a,null,2),c=this.options.filename;e.assets[c]={source:()=>l,size:()=>l.length},s()}))}}
//# sourceMappingURL=/sm/9f1f179732576aca264807855ae17a543bb33c20a0edb73845bb50b67394de5b.map