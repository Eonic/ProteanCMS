/**
 * Minified by jsDelivr using Terser v5.17.1.
 * Original file: /npm/leaflet@1.9.4/src/layer/tile/TileLayer.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{GridLayer}from"./GridLayer";import Browser from"../../core/Browser";import*as Util from"../../core/Util";import*as DomEvent from"../../dom/DomEvent";import*as DomUtil from"../../dom/DomUtil";export var TileLayer=GridLayer.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,i){this._url=t,(i=Util.setOptions(this,i)).detectRetina&&Browser.retina&&i.maxZoom>0?(i.tileSize=Math.floor(i.tileSize/2),i.zoomReverse?(i.zoomOffset--,i.minZoom=Math.min(i.maxZoom,i.minZoom+1)):(i.zoomOffset++,i.maxZoom=Math.max(i.minZoom,i.maxZoom-1)),i.minZoom=Math.max(0,i.minZoom)):i.zoomReverse?i.minZoom=Math.min(i.maxZoom,i.minZoom):i.maxZoom=Math.max(i.minZoom,i.maxZoom),"string"==typeof i.subdomains&&(i.subdomains=i.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,i){return this._url===t&&void 0===i&&(i=!0),this._url=t,i||this.redraw(),this},createTile:function(t,i){var o=document.createElement("img");return DomEvent.on(o,"load",Util.bind(this._tileOnLoad,this,i,o)),DomEvent.on(o,"error",Util.bind(this._tileOnError,this,i,o)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(o.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(o.referrerPolicy=this.options.referrerPolicy),o.alt="",o.src=this.getTileUrl(t),o},getTileUrl:function(t){var i={r:Browser.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var o=this._globalTileRange.max.y-t.y;this.options.tms&&(i.y=o),i["-y"]=o}return Util.template(this._url,Util.extend(i,this.options))},_tileOnLoad:function(t,i){Browser.ielt9?setTimeout(Util.bind(t,this,null,i),0):t(null,i)},_tileOnError:function(t,i,o){var e=this.options.errorTileUrl;e&&i.getAttribute("src")!==e&&(i.src=e),t(o,i)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,i=this.options.maxZoom;return this.options.zoomReverse&&(t=i-t),t+this.options.zoomOffset},_getSubdomain:function(t){var i=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[i]},_abortLoading:function(){var t,i;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&((i=this._tiles[t].el).onload=Util.falseFn,i.onerror=Util.falseFn,!i.complete)){i.src=Util.emptyImageUrl;var o=this._tiles[t].coords;DomUtil.remove(i),delete this._tiles[t],this.fire("tileabort",{tile:i,coords:o})}},_removeTile:function(t){var i=this._tiles[t];if(i)return i.el.setAttribute("src",Util.emptyImageUrl),GridLayer.prototype._removeTile.call(this,t)},_tileReady:function(t,i,o){if(this._map&&(!o||o.getAttribute("src")!==Util.emptyImageUrl))return GridLayer.prototype._tileReady.call(this,t,i,o)}});export function tileLayer(t,i){return new TileLayer(t,i)}
//# sourceMappingURL=/sm/9505991493871708c92a8f722b37f2195e6908f5adce4f2618d6d288819742ea.map