/**
 * Minified by jsDelivr using Terser v5.17.1.
 * Original file: /npm/leaflet@1.9.4/src/layer/Tooltip.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{DivOverlay}from"./DivOverlay";import{toPoint}from"../geometry/Point";import{Map}from"../map/Map";import{Layer}from"./Layer";import*as DomUtil from"../dom/DomUtil";import*as DomEvent from"../dom/DomEvent";import*as Util from"../core/Util";import{FeatureGroup}from"./FeatureGroup";export var Tooltip=DivOverlay.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){DivOverlay.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){DivOverlay.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=DivOverlay.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=DomUtil.create("div",t),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+Util.stamp(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var o,i,e=this._map,n=this._container,s=e.latLngToContainerPoint(e.getCenter()),l=e.layerPointToContainerPoint(t),r=this.options.direction,p=n.offsetWidth,a=n.offsetHeight,h=toPoint(this.options.offset),c=this._getAnchor();"top"===r?(o=p/2,i=a):"bottom"===r?(o=p/2,i=0):"center"===r?(o=p/2,i=a/2):"right"===r?(o=0,i=a/2):"left"===r?(o=p,i=a/2):l.x<s.x?(r="right",o=0,i=a/2):(r="left",o=p+2*(h.x+c.x),i=a/2),t=t.subtract(toPoint(o,i,!0)).add(h).add(c),DomUtil.removeClass(n,"leaflet-tooltip-right"),DomUtil.removeClass(n,"leaflet-tooltip-left"),DomUtil.removeClass(n,"leaflet-tooltip-top"),DomUtil.removeClass(n,"leaflet-tooltip-bottom"),DomUtil.addClass(n,"leaflet-tooltip-"+r),DomUtil.setPosition(n,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&DomUtil.setOpacity(this._container,t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(o)},_getAnchor:function(){return toPoint(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});export var tooltip=function(t,o){return new Tooltip(t,o)};Map.include({openTooltip:function(t,o,i){return this._initOverlay(Tooltip,t,o,i).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Layer.include({bindTooltip:function(t,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Tooltip,this._tooltip,t,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var o=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,i.click=this._openTooltip,this._map?this._addFocusListeners():i.add=this._addFocusListeners),this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),this[o](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof FeatureGroup||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var o="function"==typeof t.getElement&&t.getElement();o&&(DomEvent.on(o,"focus",(function(){this._tooltip._source=t,this.openTooltip()}),this),DomEvent.on(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var o="function"==typeof t.getElement&&t.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(this._tooltip&&this._map)if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",(function(){o._openOnceFlag=!1,o._openTooltip(t)}))}else this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var o,i,e=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(o=this._map.mouseEventToContainerPoint(t.originalEvent),i=this._map.containerPointToLayerPoint(o),e=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(e)}});
//# sourceMappingURL=/sm/cf91ebad6c0f2d7a5a0328cb78ad9b3c897bade5db8394db1b9e616e7a0f622d.map