/**
 * Minified by jsDelivr using Terser v5.17.1.
 * Original file: /npm/leaflet@1.9.4/src/control/Control.Layers.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Control}from"./Control";import*as Util from"../core/Util";import*as DomEvent from"../dom/DomEvent";import*as DomUtil from"../dom/DomUtil";export var Layers=Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,a){return i<a?-1:a<i?1:0}},initialize:function(t,e,i){for(var a in Util.setOptions(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,t)this._addLayer(t[a],a);for(a in e)this._addLayer(e[a],a,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Control.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(Util.stamp(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){DomUtil.addClass(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(DomUtil.addClass(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):DomUtil.removeClass(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return DomUtil.removeClass(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=DomUtil.create("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),DomEvent.disableClickPropagation(e),DomEvent.disableScrollPropagation(e);var a=this._section=DomUtil.create("section",t+"-list");i&&(this._map.on("click",this.collapse,this),DomEvent.on(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var s=this._layersLink=DomUtil.create("a",t+"-toggle",e);s.href="#",s.title="Layers",s.setAttribute("role","button"),DomEvent.on(s,{keydown:function(t){13===t.keyCode&&this._expandSafely()},click:function(t){DomEvent.preventDefault(t),this._expandSafely()}},this),i||this.expand(),this._baseLayersList=DomUtil.create("div",t+"-base",a),this._separator=DomUtil.create("div",t+"-separator",a),this._overlaysList=DomUtil.create("div",t+"-overlays",a),e.appendChild(a)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&Util.stamp(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(Util.bind((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;DomUtil.empty(this._baseLayersList),DomUtil.empty(this._overlaysList),this._layerControlInputs=[];var t,e,i,a,s=0;for(i=0;i<this._layers.length;i++)a=this._layers[i],this._addItem(a),e=e||a.overlay,t=t||!a.overlay,s+=a.overlay?0:1;return this.options.hideSingleBase&&(t=t&&s>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(Util.stamp(t.target)),i=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",a=document.createElement("div");return a.innerHTML=i,a.firstChild},_addItem:function(t){var e,i=document.createElement("label"),a=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=a):e=this._createRadioElement("leaflet-base-layers_"+Util.stamp(this),a),this._layerControlInputs.push(e),e.layerId=Util.stamp(t.layer),DomEvent.on(e,"click",this._onInputClick,this);var s=document.createElement("span");s.innerHTML=" "+t.name;var o=document.createElement("span");return i.appendChild(o),o.appendChild(e),o.appendChild(s),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){if(!this._preventClick){var t,e,i=this._layerControlInputs,a=[],s=[];this._handlingClick=!0;for(var o=i.length-1;o>=0;o--)t=i[o],e=this._getLayer(t.layerId).layer,t.checked?a.push(e):t.checked||s.push(e);for(o=0;o<s.length;o++)this._map.hasLayer(s[o])&&this._map.removeLayer(s[o]);for(o=0;o<a.length;o++)this._map.hasLayer(a[o])||this._map.addLayer(a[o]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t,e,i=this._layerControlInputs,a=this._map.getZoom(),s=i.length-1;s>=0;s--)t=i[s],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&a<e.options.minZoom||void 0!==e.options.maxZoom&&a>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,DomEvent.on(t,"click",DomEvent.preventDefault),this.expand();var e=this;setTimeout((function(){DomEvent.off(t,"click",DomEvent.preventDefault),e._preventClick=!1}))}});export var layers=function(t,e,i){return new Layers(t,e,i)};
//# sourceMappingURL=/sm/c5f6bd0dc43464051d4cac329aa51549faf01e1e5cf3d94d8d2fa1afa75271de.map