/**
 * Minified by jsDelivr using Terser v5.17.1.
 * Original file: /npm/leaflet@1.9.4/src/map/handler/Map.BoxZoom.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Map}from"../Map";import{Handler}from"../../core/Handler";import*as Util from"../../core/Util";import*as DomUtil from"../../dom/DomUtil";import*as DomEvent from"../../dom/DomEvent";import{LatLngBounds}from"../../geo/LatLngBounds";import{Bounds}from"../../geometry/Bounds";Map.mergeOptions({boxZoom:!0});export var BoxZoom=Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){DomUtil.remove(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),DomUtil.disableTextSelection(),DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(t),DomEvent.on(document,{contextmenu:DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=DomUtil.create("div","leaflet-zoom-box",this._container),DomUtil.addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var o=new Bounds(this._point,this._startPoint),e=o.getSize();DomUtil.setPosition(this._box,o.min),this._box.style.width=e.x+"px",this._box.style.height=e.y+"px"},_finish:function(){this._moved&&(DomUtil.remove(this._box),DomUtil.removeClass(this._container,"leaflet-crosshair")),DomUtil.enableTextSelection(),DomUtil.enableImageDrag(),DomEvent.off(document,{contextmenu:DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(Util.bind(this._resetState,this),0);var o=new LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(t){27===t.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Map.addInitHook("addHandler","boxZoom",BoxZoom);
//# sourceMappingURL=/sm/a3c2c4aa1b11e2f78a56a39eb5eb378cd17f97b820199f18887fae5f03c945e0.map