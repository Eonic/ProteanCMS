/**
 * Minified by jsDelivr using Terser v5.17.1.
 * Original file: /npm/leaflet@1.9.4/src/map/handler/Map.TapHold.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Map}from"../Map";import{Handler}from"../../core/Handler";import*as DomEvent from"../../dom/DomEvent";import{Point}from"../../geometry/Point";import*as Util from"../../core/Util";import Browser from"../../core/Browser";var tapHoldDelay=600;Map.mergeOptions({tapHold:Browser.touchNative&&Browser.safari&&Browser.mobile,tapTolerance:15});export var TapHold=Handler.extend({addHooks:function(){DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),1===t.touches.length){var o=t.touches[0];this._startPos=this._newPos=new Point(o.clientX,o.clientY),this._holdTimeout=setTimeout(Util.bind((function(){this._cancel(),this._isTapValid()&&(DomEvent.on(document,"touchend",DomEvent.preventDefault),DomEvent.on(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))}),this),tapHoldDelay),DomEvent.on(document,"touchend touchcancel contextmenu",this._cancel,this),DomEvent.on(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){DomEvent.off(document,"touchend",DomEvent.preventDefault),DomEvent.off(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),DomEvent.off(document,"touchend touchcancel contextmenu",this._cancel,this),DomEvent.off(document,"touchmove",this._onMove,this)},_onMove:function(t){var o=t.touches[0];this._newPos=new Point(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,o){var e=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});e._simulated=!0,o.target.dispatchEvent(e)}});Map.addInitHook("addHandler","tapHold",TapHold);
//# sourceMappingURL=/sm/4f41f3a79e9e41e100b2d7d063494094b4ee49e5f71eb5578dceb2a6d4e1cd65.map