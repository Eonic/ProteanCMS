/**
 * Minified by jsDelivr using Terser v5.17.1.
 * Original file: /npm/leaflet@1.9.4/src/map/Map.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as Util from"../core/Util";import{Evented}from"../core/Events";import{EPSG3857}from"../geo/crs/CRS.EPSG3857";import{Point,toPoint}from"../geometry/Point";import{Bounds,toBounds}from"../geometry/Bounds";import{LatLng,toLatLng}from"../geo/LatLng";import{LatLngBounds,toLatLngBounds}from"../geo/LatLngBounds";import Browser from"../core/Browser";import*as DomEvent from"../dom/DomEvent";import*as DomUtil from"../dom/DomUtil";import{PosAnimation}from"../dom/PosAnimation";export var Map=Evented.extend({options:{crs:EPSG3857,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,i){i=Util.setOptions(this,i),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=Util.bind(this._onResize,this),this._initEvents(),i.maxBounds&&this.setMaxBounds(i.maxBounds),void 0!==i.zoom&&(this._zoom=this._limitZoom(i.zoom)),i.center&&void 0!==i.zoom&&this.setView(toLatLng(i.center),i.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=DomUtil.TRANSITION&&Browser.any3d&&!Browser.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),DomEvent.on(this._proxy,DomUtil.TRANSITION_END,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,i,o){if((i=void 0===i?this._zoom:this._limitZoom(i),t=this._limitCenter(toLatLng(t),i,this.options.maxBounds),o=o||{},this._stop(),this._loaded&&!o.reset&&!0!==o)&&(void 0!==o.animate&&(o.zoom=Util.extend({animate:o.animate},o.zoom),o.pan=Util.extend({animate:o.animate,duration:o.duration},o.pan)),this._zoom!==i?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,i,o.zoom):this._tryAnimatedPan(t,o.pan)))return clearTimeout(this._sizeTimer),this;return this._resetView(t,i,o.pan&&o.pan.noMoveStart),this},setZoom:function(t,i){return this._loaded?this.setView(this.getCenter(),t,{zoom:i}):(this._zoom=t,this)},zoomIn:function(t,i){return t=t||(Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,i)},zoomOut:function(t,i){return t=t||(Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,i)},setZoomAround:function(t,i,o){var e=this.getZoomScale(i),n=this.getSize().divideBy(2),s=(t instanceof Point?t:this.latLngToContainerPoint(t)).subtract(n).multiplyBy(1-1/e),a=this.containerPointToLatLng(n.add(s));return this.setView(a,i,{zoom:o})},_getBoundsCenterZoom:function(t,i){i=i||{},t=t.getBounds?t.getBounds():toLatLngBounds(t);var o=toPoint(i.paddingTopLeft||i.padding||[0,0]),e=toPoint(i.paddingBottomRight||i.padding||[0,0]),n=this.getBoundsZoom(t,!1,o.add(e));if((n="number"==typeof i.maxZoom?Math.min(i.maxZoom,n):n)===1/0)return{center:t.getCenter(),zoom:n};var s=e.subtract(o).divideBy(2),a=this.project(t.getSouthWest(),n),r=this.project(t.getNorthEast(),n);return{center:this.unproject(a.add(r).divideBy(2).add(s),n),zoom:n}},fitBounds:function(t,i){if(!(t=toLatLngBounds(t)).isValid())throw new Error("Bounds are not valid.");var o=this._getBoundsCenterZoom(t,i);return this.setView(o.center,o.zoom,i)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,i){return this.setView(t,this._zoom,{pan:i})},panBy:function(t,i){if(i=i||{},!(t=toPoint(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==i.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),i.noMoveStart||this.fire("movestart"),!1!==i.animate){DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var o=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,o,i.duration||.25,i.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,i,o){if(!1===(o=o||{}).animate||!Browser.any3d)return this.setView(t,i,o);this._stop();var e=this.project(this.getCenter()),n=this.project(t),s=this.getSize(),a=this._zoom;t=toLatLng(t),i=void 0===i?a:i;var r=Math.max(s.x,s.y),h=r*this.getZoomScale(a,i),m=n.distanceTo(e)||1,d=1.42,u=d*d;function c(t){var i=(h*h-r*r+(t?-1:1)*u*u*m*m)/(2*(t?h:r)*u*m),o=Math.sqrt(i*i+1)-i;return o<1e-9?-18:Math.log(o)}function l(t){return(Math.exp(t)-Math.exp(-t))/2}function _(t){return(Math.exp(t)+Math.exp(-t))/2}var f=c(0);function p(t){return r*(_(f)*(l(i=f+d*t)/_(i))-l(f))/u;var i}var g=Date.now(),v=(c(1)-f)/d,P=o.duration?1e3*o.duration:1e3*v*.8;return this._moveStart(!0,o.noMoveStart),function o(){var s=(Date.now()-g)/P,h=function(t){return 1-Math.pow(1-t,1.5)}(s)*v;s<=1?(this._flyToFrame=Util.requestAnimFrame(o,this),this._move(this.unproject(e.add(n.subtract(e).multiplyBy(p(h)/m)),a),this.getScaleZoom(r/function(t){return r*(_(f)/_(f+d*t))}(h),a),{flyTo:!0})):this._move(t,i)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,i){var o=this._getBoundsCenterZoom(t,i);return this.flyTo(o.center,o.zoom,i)},setMaxBounds:function(t){return t=toLatLngBounds(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var i=this.options.minZoom;return this.options.minZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var i=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,i){this._enforcingBounds=!0;var o=this.getCenter(),e=this._limitCenter(o,this._zoom,toLatLngBounds(t));return o.equals(e)||this.panTo(e,i),this._enforcingBounds=!1,this},panInside:function(t,i){var o=toPoint((i=i||{}).paddingTopLeft||i.padding||[0,0]),e=toPoint(i.paddingBottomRight||i.padding||[0,0]),n=this.project(this.getCenter()),s=this.project(t),a=this.getPixelBounds(),r=toBounds([a.min.add(o),a.max.subtract(e)]),h=r.getSize();if(!r.contains(s)){this._enforcingBounds=!0;var m=s.subtract(r.getCenter()),d=r.extend(s).getSize().subtract(h);n.x+=m.x<0?-d.x:d.x,n.y+=m.y<0?-d.y:d.y,this.panTo(this.unproject(n),i),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=Util.extend({animate:!1,pan:!0},!0===t?{animate:!0}:t);var i=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),e=i.divideBy(2).round(),n=o.divideBy(2).round(),s=e.subtract(n);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(Util.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:o})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=Util.extend({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var i=Util.bind(this._handleGeolocationResponse,this),o=Util.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,o,t):navigator.geolocation.getCurrentPosition(i,o,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var i=t.code,o=t.message||(1===i?"permission denied":2===i?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:i,message:"Geolocation error: "+o+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var i=t.coords.latitude,o=t.coords.longitude,e=new LatLng(i,o),n=e.toBounds(2*t.coords.accuracy),s=this._locateOptions;if(s.setView){var a=this.getBoundsZoom(n);this.setView(e,s.maxZoom?Math.min(a,s.maxZoom):a)}var r={latlng:e,bounds:n,timestamp:t.timestamp};for(var h in t.coords)"number"==typeof t.coords[h]&&(r[h]=t.coords[h]);this.fire("locationfound",r)}},addHandler:function(t,i){if(!i)return this;var o=this[t]=new i(this);return this._handlers.push(o),this.options[t]&&o.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),DomUtil.remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)DomUtil.remove(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,i){var o="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e=DomUtil.create("div",o,i||this._mapPane);return t&&(this._panes[t]=e),e},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),i=this.unproject(t.getBottomLeft()),o=this.unproject(t.getTopRight());return new LatLngBounds(i,o)},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,i,o){t=toLatLngBounds(t),o=toPoint(o||[0,0]);var e=this.getZoom()||0,n=this.getMinZoom(),s=this.getMaxZoom(),a=t.getNorthWest(),r=t.getSouthEast(),h=this.getSize().subtract(o),m=toBounds(this.project(r,e),this.project(a,e)).getSize(),d=Browser.any3d?this.options.zoomSnap:1,u=h.x/m.x,c=h.y/m.y,l=i?Math.max(u,c):Math.min(u,c);return e=this.getScaleZoom(l,e),d&&(e=Math.round(e/(d/100))*(d/100),e=i?Math.ceil(e/d)*d:Math.floor(e/d)*d),Math.max(n,Math.min(s,e))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new Point(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,i){var o=this._getTopLeftPoint(t,i);return new Bounds(o,o.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,i){var o=this.options.crs;return i=void 0===i?this._zoom:i,o.scale(t)/o.scale(i)},getScaleZoom:function(t,i){var o=this.options.crs;i=void 0===i?this._zoom:i;var e=o.zoom(t*o.scale(i));return isNaN(e)?1/0:e},project:function(t,i){return i=void 0===i?this._zoom:i,this.options.crs.latLngToPoint(toLatLng(t),i)},unproject:function(t,i){return i=void 0===i?this._zoom:i,this.options.crs.pointToLatLng(toPoint(t),i)},layerPointToLatLng:function(t){var i=toPoint(t).add(this.getPixelOrigin());return this.unproject(i)},latLngToLayerPoint:function(t){return this.project(toLatLng(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(toLatLng(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(toLatLngBounds(t))},distance:function(t,i){return this.options.crs.distance(toLatLng(t),toLatLng(i))},containerPointToLayerPoint:function(t){return toPoint(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return toPoint(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var i=this.containerPointToLayerPoint(toPoint(t));return this.layerPointToLatLng(i)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(toLatLng(t)))},mouseEventToContainerPoint:function(t){return DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var i=this._container=DomUtil.get(t);if(!i)throw new Error("Map container not found.");if(i._leaflet_id)throw new Error("Map container is already initialized.");DomEvent.on(i,"scroll",this._onScroll,this),this._containerId=Util.stamp(i)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&Browser.any3d,DomUtil.addClass(t,"leaflet-container"+(Browser.touch?" leaflet-touch":"")+(Browser.retina?" leaflet-retina":"")+(Browser.ielt9?" leaflet-oldie":"")+(Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var i=DomUtil.getStyle(t,"position");"absolute"!==i&&"relative"!==i&&"fixed"!==i&&"sticky"!==i&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),DomUtil.setPosition(this._mapPane,new Point(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(DomUtil.addClass(t.markerPane,"leaflet-zoom-hide"),DomUtil.addClass(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,i,o){DomUtil.setPosition(this._mapPane,new Point(0,0));var e=!this._loaded;this._loaded=!0,i=this._limitZoom(i),this.fire("viewprereset");var n=this._zoom!==i;this._moveStart(n,o)._move(t,i)._moveEnd(n),this.fire("viewreset"),e&&this.fire("load")},_moveStart:function(t,i){return t&&this.fire("zoomstart"),i||this.fire("movestart"),this},_move:function(t,i,o,e){void 0===i&&(i=this._zoom);var n=this._zoom!==i;return this._zoom=i,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),e?o&&o.pinch&&this.fire("zoom",o):((n||o&&o.pinch)&&this.fire("zoom",o),this.fire("move",o)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Util.cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[Util.stamp(this._container)]=this;var i=t?DomEvent.off:DomEvent.on;i(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&i(window,"resize",this._onResize,this),Browser.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=Util.requestAnimFrame((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,i){for(var o,e=[],n="mouseout"===i||"mouseover"===i,s=t.target||t.srcElement,a=!1;s;){if((o=this._targets[Util.stamp(s)])&&("click"===i||"preclick"===i)&&this._draggableMoved(o)){a=!0;break}if(o&&o.listens(i,!0)){if(n&&!DomEvent.isExternalTarget(s,t))break;if(e.push(o),n)break}if(s===this._container)break;s=s.parentNode}return e.length||a||n||!this.listens(i,!0)||(e=[this]),e},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var i=t.target||t.srcElement;if(!(!this._loaded||i._leaflet_disable_events||"click"===t.type&&this._isClickDisabled(i))){var o=t.type;"mousedown"===o&&DomUtil.preventOutline(i),this._fireDOMEvent(t,o)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,i,o){if("click"===t.type){var e=Util.extend({},t);e.type="preclick",this._fireDOMEvent(e,e.type,o)}var n=this._findEventTargets(t,i);if(o){for(var s=[],a=0;a<o.length;a++)o[a].listens(i,!0)&&s.push(o[a]);n=s.concat(n)}if(n.length){"contextmenu"===i&&DomEvent.preventDefault(t);var r=n[0],h={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var m=r.getLatLng&&(!r._radius||r._radius<=10);h.containerPoint=m?this.latLngToContainerPoint(r.getLatLng()):this.mouseEventToContainerPoint(t),h.layerPoint=this.containerPointToLayerPoint(h.containerPoint),h.latlng=m?r.getLatLng():this.layerPointToLatLng(h.layerPoint)}for(a=0;a<n.length;a++)if(n[a].fire(i,h,!0),h.originalEvent._stopped||!1===n[a].options.bubblingMouseEvents&&-1!==Util.indexOf(this._mouseEvents,i))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,i=this._handlers.length;t<i;t++)this._handlers[t].disable()},whenReady:function(t,i){return this._loaded?t.call(i||this,{target:this}):this.on("load",t,i),this},_getMapPanePos:function(){return DomUtil.getPosition(this._mapPane)||new Point(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,i){return(t&&void 0!==i?this._getNewPixelOrigin(t,i):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,i){var o=this.getSize()._divideBy(2);return this.project(t,i)._subtract(o)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,i,o){var e=this._getNewPixelOrigin(o,i);return this.project(t,i)._subtract(e)},_latLngBoundsToNewLayerBounds:function(t,i,o){var e=this._getNewPixelOrigin(o,i);return toBounds([this.project(t.getSouthWest(),i)._subtract(e),this.project(t.getNorthWest(),i)._subtract(e),this.project(t.getSouthEast(),i)._subtract(e),this.project(t.getNorthEast(),i)._subtract(e)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,i,o){if(!o)return t;var e=this.project(t,i),n=this.getSize().divideBy(2),s=new Bounds(e.subtract(n),e.add(n)),a=this._getBoundsOffset(s,o,i);return Math.abs(a.x)<=1&&Math.abs(a.y)<=1?t:this.unproject(e.add(a),i)},_limitOffset:function(t,i){if(!i)return t;var o=this.getPixelBounds(),e=new Bounds(o.min.add(t),o.max.add(t));return t.add(this._getBoundsOffset(e,i))},_getBoundsOffset:function(t,i,o){var e=toBounds(this.project(i.getNorthEast(),o),this.project(i.getSouthWest(),o)),n=e.min.subtract(t.min),s=e.max.subtract(t.max),a=this._rebound(n.x,-s.x),r=this._rebound(n.y,-s.y);return new Point(a,r)},_rebound:function(t,i){return t+i>0?Math.round(t-i)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(i))},_limitZoom:function(t){var i=this.getMinZoom(),o=this.getMaxZoom(),e=Browser.any3d?this.options.zoomSnap:1;return e&&(t=Math.round(t/e)*e),Math.max(i,Math.min(o,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,i){var o=this._getCenterOffset(t)._trunc();return!(!0!==(i&&i.animate)&&!this.getSize().contains(o))&&(this.panBy(o,i),!0)},_createAnimProxy:function(){var t=this._proxy=DomUtil.create("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var i=DomUtil.TRANSFORM,o=this._proxy.style[i];DomUtil.setTransform(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),o===this._proxy.style[i]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){DomUtil.remove(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),i=this.getZoom();DomUtil.setTransform(this._proxy,this.project(t,i),this.getZoomScale(i,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,i,o){if(this._animatingZoom)return!0;if(o=o||{},!this._zoomAnimated||!1===o.animate||this._nothingToAnimate()||Math.abs(i-this._zoom)>this.options.zoomAnimationThreshold)return!1;var e=this.getZoomScale(i),n=this._getCenterOffset(t)._divideBy(1-1/e);return!(!0!==o.animate&&!this.getSize().contains(n))&&(Util.requestAnimFrame((function(){this._moveStart(!0,o.noMoveStart||!1)._animateZoom(t,i,!0)}),this),!0)},_animateZoom:function(t,i,o,e){this._mapPane&&(o&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=i,DomUtil.addClass(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:i,noUpdate:e}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(Util.bind(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});export function createMap(t,i){return new Map(t,i)}
//# sourceMappingURL=/sm/80f992ec22f9b6a56976e1ff565fd2861ec53a72d12a04163f414e5b74592d3b.map