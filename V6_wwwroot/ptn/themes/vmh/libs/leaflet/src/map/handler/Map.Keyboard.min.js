/**
 * Minified by jsDelivr using Terser v5.17.1.
 * Original file: /npm/leaflet@1.9.4/src/map/handler/Map.Keyboard.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Map}from"../Map";import{Handler}from"../../core/Handler";import{on,off,stop}from"../../dom/DomEvent";import{toPoint}from"../../geometry/Point";Map.mergeOptions({keyboard:!0,keyboardPanDelta:80});export var Keyboard=Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),on(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,t=document.documentElement,e=o.scrollTop||t.scrollTop,n=o.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(n,e)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var t,e,n=this._panKeys={},s=this.keyCodes;for(t=0,e=s.left.length;t<e;t++)n[s.left[t]]=[-1*o,0];for(t=0,e=s.right.length;t<e;t++)n[s.right[t]]=[o,0];for(t=0,e=s.down.length;t<e;t++)n[s.down[t]]=[0,o];for(t=0,e=s.up.length;t<e;t++)n[s.up[t]]=[0,-1*o]},_setZoomDelta:function(o){var t,e,n=this._zoomKeys={},s=this.keyCodes;for(t=0,e=s.zoomIn.length;t<e;t++)n[s.zoomIn[t]]=o;for(t=0,e=s.zoomOut.length;t<e;t++)n[s.zoomOut[t]]=-o},_addHooks:function(){on(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){off(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var t,e=o.keyCode,n=this._map;if(e in this._panKeys){if(!n._panAnim||!n._panAnim._inProgress)if(t=this._panKeys[e],o.shiftKey&&(t=toPoint(t).multiplyBy(3)),n.options.maxBounds&&(t=n._limitOffset(toPoint(t),n.options.maxBounds)),n.options.worldCopyJump){var s=n.wrapLatLng(n.unproject(n.project(n.getCenter()).add(t)));n.panTo(s)}else n.panBy(t)}else if(e in this._zoomKeys)n.setZoom(n.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[e]);else{if(27!==e||!n._popup||!n._popup.options.closeOnEscapeKey)return;n.closePopup()}stop(o)}}});Map.addInitHook("addHandler","keyboard",Keyboard);
//# sourceMappingURL=/sm/faf5c68ef0f75176e8235a38f119b24c081bd35d5ac4fc679d5141d86c0d9e75.map