/**
 * Minified by jsDelivr using Terser v5.13.1.
 * Original file: /npm/swiper@8.1.6/modules/free-mode/free-mode.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{now}from"../../shared/utils.js";export default function freeMode(e){let{swiper:t,extendParams:o,emit:n,once:i}=e;o({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}}),Object.assign(t,{freeMode:{onTouchStart:function(){const e=t.getTranslate();t.setTranslate(e),t.setTransition(0),t.touchEventsData.velocities.length=0,t.freeMode.onTouchEnd({currentPos:t.rtl?t.translate:-t.translate})},onTouchMove:function(){const{touchEventsData:e,touches:o}=t;0===e.velocities.length&&e.velocities.push({position:o[t.isHorizontal()?"startX":"startY"],time:e.touchStartTime}),e.velocities.push({position:o[t.isHorizontal()?"currentX":"currentY"],time:now()})},onTouchEnd:function(e){let{currentPos:o}=e;const{params:s,$wrapperEl:a,rtlTranslate:l,snapGrid:r,touchEventsData:m}=t,c=now()-m.touchStartTime;if(o<-t.minTranslate())t.slideTo(t.activeIndex);else if(o>-t.maxTranslate())t.slides.length<r.length?t.slideTo(r.length-1):t.slideTo(t.slides.length-1);else{if(s.freeMode.momentum){if(m.velocities.length>1){const e=m.velocities.pop(),o=m.velocities.pop(),n=e.position-o.position,i=e.time-o.time;t.velocity=n/i,t.velocity/=2,Math.abs(t.velocity)<s.freeMode.minimumVelocity&&(t.velocity=0),(i>150||now()-e.time>300)&&(t.velocity=0)}else t.velocity=0;t.velocity*=s.freeMode.momentumVelocityRatio,m.velocities.length=0;let e=1e3*s.freeMode.momentumRatio;const o=t.velocity*e;let c=t.translate+o;l&&(c=-c);let d,u=!1;const f=20*Math.abs(t.velocity)*s.freeMode.momentumBounceRatio;let p;if(c<t.maxTranslate())s.freeMode.momentumBounce?(c+t.maxTranslate()<-f&&(c=t.maxTranslate()-f),d=t.maxTranslate(),u=!0,m.allowMomentumBounce=!0):c=t.maxTranslate(),s.loop&&s.centeredSlides&&(p=!0);else if(c>t.minTranslate())s.freeMode.momentumBounce?(c-t.minTranslate()>f&&(c=t.minTranslate()+f),d=t.minTranslate(),u=!0,m.allowMomentumBounce=!0):c=t.minTranslate(),s.loop&&s.centeredSlides&&(p=!0);else if(s.freeMode.sticky){let e;for(let t=0;t<r.length;t+=1)if(r[t]>-c){e=t;break}c=Math.abs(r[e]-c)<Math.abs(r[e-1]-c)||"next"===t.swipeDirection?r[e]:r[e-1],c=-c}if(p&&i("transitionEnd",(()=>{t.loopFix()})),0!==t.velocity){if(e=l?Math.abs((-c-t.translate)/t.velocity):Math.abs((c-t.translate)/t.velocity),s.freeMode.sticky){const o=Math.abs((l?-c:c)-t.translate),n=t.slidesSizesGrid[t.activeIndex];e=o<n?s.speed:o<2*n?1.5*s.speed:2.5*s.speed}}else if(s.freeMode.sticky)return void t.slideToClosest();s.freeMode.momentumBounce&&u?(t.updateProgress(d),t.setTransition(e),t.setTranslate(c),t.transitionStart(!0,t.swipeDirection),t.animating=!0,a.transitionEnd((()=>{t&&!t.destroyed&&m.allowMomentumBounce&&(n("momentumBounce"),t.setTransition(s.speed),setTimeout((()=>{t.setTranslate(d),a.transitionEnd((()=>{t&&!t.destroyed&&t.transitionEnd()}))}),0))}))):t.velocity?(n("_freeModeNoMomentumRelease"),t.updateProgress(c),t.setTransition(e),t.setTranslate(c),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,a.transitionEnd((()=>{t&&!t.destroyed&&t.transitionEnd()})))):t.updateProgress(c),t.updateActiveIndex(),t.updateSlidesClasses()}else{if(s.freeMode.sticky)return void t.slideToClosest();s.freeMode&&n("_freeModeNoMomentumRelease")}(!s.freeMode.momentum||c>=s.longSwipesMs)&&(t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses())}}}})}
//# sourceMappingURL=/sm/4a62686517650ab9300370957ac4c8af86195cdc85d3f08bc5a3c3391e11897e.map